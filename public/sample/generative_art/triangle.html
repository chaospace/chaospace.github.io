<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas></canvas>

    <script>
      const canvas = document.querySelector("canvas");
      const ctx = canvas.getContext("2d");
      const dpr = devicePixelRatio;
      const size = 400;
      canvas.width = canvas.height = size * dpr;
      ctx.scale(dpr, dpr);
      canvas.style.width = canvas.style.height = `${size}px`;
      ctx.lineJoin = "bevel";
      const lines = [];

      function drawTriangle(pointA, pointB, pointC) {
        ctx.beginPath();
        ctx.moveTo(pointA.x, pointA.y);
        ctx.lineTo(pointB.x, pointB.y);
        ctx.lineTo(pointC.x, pointC.y);
        ctx.lineTo(pointA.x, pointA.y);
        ctx.closePath();
        var gray = Math.floor(Math.random() * 16).toString(16);
        ctx.fillStyle = "#" + gray + gray + gray;
        ctx.fill();
        ctx.stroke();
      }

      let line;
      let gap = size / 7;
      let odd = false;
      for (let y = gap / 2; y <= size; y += gap) {
        line = [];
        odd = !odd;
        for (let x = gap / 4; x <= size; x += gap) {
          const dot = { x: x + (odd ? gap / 2 : 0), y };
          line.push({
            x: dot.x + (Math.random() * 0.4 - 0.2) * gap,
            y: dot.y + (Math.random() * 0.4 - 0.2) * gap,
          });
          ctx.beginPath();
          ctx.arc(dot.x, dot.y, 1, 0, 2 * Math.PI, true);
          ctx.fill();
        }
        lines.push(line);
      }

      let dotLine;
      odd = true;
      for (let y = 0; y < lines.length; y++) {
        odd = !odd;
        dotLine = [];
        for (let i = 0; i < lines[y].length; i++) {
          dotLine.push(odd ? lines[y][i] : lines[y + 1][i]);
          dotLine.push(odd ? lines[y + 1][i] : lines[y][i]);
        }
        for (let i = 0; i < dotLine.length - 2; i++) {
          drawTriangle(dotLine[i], dotLine[i + 1], dotLine[i + 2]);
        }
      }
    </script>
  </body>
</html>
